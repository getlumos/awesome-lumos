// Auto-generated by LUMOS
// DO NOT EDIT - Changes will be overwritten

import * as borsh from '@coral-xyz/borsh';
import { PublicKey } from '@solana/web3.js';

export interface VestingPool {
  authority: PublicKey;
  token_mint: PublicKey;
  vault: PublicKey;
  name: string;
  total_schedules: number;
  total_allocated: number;
  total_released: number;
  total_revoked: number;
  is_active: boolean;
  created_at: number;
}

export const VestingPoolSchema = borsh.struct([
  borsh.publicKey('authority'),
  borsh.publicKey('token_mint'),
  borsh.publicKey('vault'),
  borsh.string('name'),
  borsh.u64('total_schedules'),
  borsh.u64('total_allocated'),
  borsh.u64('total_released'),
  borsh.u64('total_revoked'),
  borsh.bool('is_active'),
  borsh.i64('created_at'),
]);


export interface VestingSchedule {
  pool: PublicKey;
  beneficiary: PublicKey;
  vesting_type: VestingType;
  total_amount: number;
  released_amount: number;
  start_time: number;
  end_time: number;
  cliff_time?: number | undefined;
  last_release_time: number;
  is_revocable: boolean;
  is_revoked: boolean;
  revoked_at?: number | undefined;
  created_at: number;
}

export const VestingScheduleSchema = borsh.struct([
  borsh.publicKey('pool'),
  borsh.publicKey('beneficiary'),
  borsh.vestingtype('vesting_type'),
  borsh.u64('total_amount'),
  borsh.u64('released_amount'),
  borsh.i64('start_time'),
  borsh.i64('end_time'),
  borsh.option(borsh.i64)('cliff_time'),
  borsh.i64('last_release_time'),
  borsh.bool('is_revocable'),
  borsh.bool('is_revoked'),
  borsh.option(borsh.i64)('revoked_at'),
  borsh.i64('created_at'),
]);


export type VestingType =
  | { kind: 'Linear' }
  | { kind: 'Cliff'; cliff_duration: number }
  | { kind: 'CliffLinear'; cliff_duration: number; cliff_percentage: number }
  | { kind: 'Milestone'; milestones: Vec }
;

export const VestingTypeSchema = borsh.rustEnum([
  borsh.unit('Linear'),
  borsh.struct([
    borsh.i64('cliff_duration'),
  ], 'Cliff'),
  borsh.struct([
    borsh.i64('cliff_duration'),
    borsh.u64('cliff_percentage'),
  ], 'CliffLinear'),
  borsh.struct([
    borsh.vec('milestones'),
  ], 'Milestone'),
]);


export interface Milestone {
  unlock_time: number;
  percentage: number;
  is_unlocked: boolean;
}

export const MilestoneSchema = borsh.struct([
  borsh.i64('unlock_time'),
  borsh.u64('percentage'),
  borsh.bool('is_unlocked'),
]);


export interface ReleaseRecord {
  schedule: PublicKey;
  beneficiary: PublicKey;
  amount: number;
  released_at: number;
  cumulative_released: number;
}

export const ReleaseRecordSchema = borsh.struct([
  borsh.publicKey('schedule'),
  borsh.publicKey('beneficiary'),
  borsh.u64('amount'),
  borsh.i64('released_at'),
  borsh.u64('cumulative_released'),
]);


export interface Beneficiary {
  wallet: PublicKey;
  pool: PublicKey;
  total_allocated: number;
  total_released: number;
  total_revoked: number;
  schedules_count: number;
  first_vesting_at: number;
  last_release_at: number;
}

export const BeneficiarySchema = borsh.struct([
  borsh.publicKey('wallet'),
  borsh.publicKey('pool'),
  borsh.u64('total_allocated'),
  borsh.u64('total_released'),
  borsh.u64('total_revoked'),
  borsh.u64('schedules_count'),
  borsh.i64('first_vesting_at'),
  borsh.i64('last_release_at'),
]);


export interface RevocationRecord {
  schedule: PublicKey;
  beneficiary: PublicKey;
  amount_vested: number;
  amount_revoked: number;
  revoked_by: PublicKey;
  revoked_at: number;
  reason: string;
}

export const RevocationRecordSchema = borsh.struct([
  borsh.publicKey('schedule'),
  borsh.publicKey('beneficiary'),
  borsh.u64('amount_vested'),
  borsh.u64('amount_revoked'),
  borsh.publicKey('revoked_by'),
  borsh.i64('revoked_at'),
  borsh.string('reason'),
]);


export interface VestingEvent {
  event_type: EventType;
  pool: PublicKey;
  beneficiary: PublicKey;
  amount: number;
  timestamp: number;
  block_height: number;
}

export const VestingEventSchema = borsh.struct([
  borsh.eventtype('event_type'),
  borsh.publicKey('pool'),
  borsh.publicKey('beneficiary'),
  borsh.u64('amount'),
  borsh.i64('timestamp'),
  borsh.u64('block_height'),
]);


export type EventType =
  | { kind: 'PoolCreated' }
  | { kind: 'ScheduleCreated'; schedule_id: PublicKey; vesting_type: VestingType; total_amount: number }
  | { kind: 'TokensReleased'; schedule_id: PublicKey; amount: number }
  | { kind: 'ScheduleRevoked'; schedule_id: PublicKey; amount_revoked: number }
  | { kind: 'MilestoneUnlocked'; schedule_id: PublicKey; milestone_index: number }
  | { kind: 'BeneficiaryUpdated'; old_beneficiary: PublicKey; new_beneficiary: PublicKey }
;

export const EventTypeSchema = borsh.rustEnum([
  borsh.unit('PoolCreated'),
  borsh.struct([
    borsh.publicKey('schedule_id'),
    borsh.vestingtype('vesting_type'),
    borsh.u64('total_amount'),
  ], 'ScheduleCreated'),
  borsh.struct([
    borsh.publicKey('schedule_id'),
    borsh.u64('amount'),
  ], 'TokensReleased'),
  borsh.struct([
    borsh.publicKey('schedule_id'),
    borsh.u64('amount_revoked'),
  ], 'ScheduleRevoked'),
  borsh.struct([
    borsh.publicKey('schedule_id'),
    borsh.u64('milestone_index'),
  ], 'MilestoneUnlocked'),
  borsh.struct([
    borsh.publicKey('old_beneficiary'),
    borsh.publicKey('new_beneficiary'),
  ], 'BeneficiaryUpdated'),
]);


export interface PoolStats {
  pool: PublicKey;
  total_beneficiaries: number;
  average_vesting_duration: number;
  largest_allocation: number;
  total_cliffs_passed: number;
  total_milestones_unlocked: number;
  completion_rate: number;
  last_updated: number;
}

export const PoolStatsSchema = borsh.struct([
  borsh.publicKey('pool'),
  borsh.u64('total_beneficiaries'),
  borsh.i64('average_vesting_duration'),
  borsh.u64('largest_allocation'),
  borsh.u64('total_cliffs_passed'),
  borsh.u64('total_milestones_unlocked'),
  borsh.u64('completion_rate'),
  borsh.i64('last_updated'),
]);


export interface BeneficiaryStats {
  beneficiary: PublicKey;
  pool: PublicKey;
  vesting_progress: number;
  days_until_next_release: number;
  estimated_monthly_release: number;
  total_schedules_completed: number;
  average_release_interval: number;
}

export const BeneficiaryStatsSchema = borsh.struct([
  borsh.publicKey('beneficiary'),
  borsh.publicKey('pool'),
  borsh.u64('vesting_progress'),
  borsh.i64('days_until_next_release'),
  borsh.u64('estimated_monthly_release'),
  borsh.u64('total_schedules_completed'),
  borsh.i64('average_release_interval'),
]);
