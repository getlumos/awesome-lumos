// Auto-generated by LUMOS
// DO NOT EDIT - Changes will be overwritten

import * as borsh from '@coral-xyz/borsh';
import { PublicKey } from '@solana/web3.js';

export interface StakingPool {
  authority: PublicKey;
  token_mint: PublicKey;
  vault: PublicKey;
  total_staked: number;
  total_stakers: number;
  reward_rate: number;
  min_stake_amount: number;
  min_lock_duration: number;
  cooldown_period: number;
  is_active: boolean;
  created_at: number;
}

export const StakingPoolSchema = borsh.struct([
  borsh.publicKey('authority'),
  borsh.publicKey('token_mint'),
  borsh.publicKey('vault'),
  borsh.u64('total_staked'),
  borsh.u64('total_stakers'),
  borsh.u64('reward_rate'),
  borsh.u64('min_stake_amount'),
  borsh.i64('min_lock_duration'),
  borsh.i64('cooldown_period'),
  borsh.bool('is_active'),
  borsh.i64('created_at'),
]);


export interface StakeAccount {
  owner: PublicKey;
  pool: PublicKey;
  amount: number;
  staked_at: number;
  last_claim_at: number;
  unlock_at: number;
  total_claimed: number;
  status: StakingStatus;
  unstake_requested_at?: number | undefined;
}

export const StakeAccountSchema = borsh.struct([
  borsh.publicKey('owner'),
  borsh.publicKey('pool'),
  borsh.u64('amount'),
  borsh.i64('staked_at'),
  borsh.i64('last_claim_at'),
  borsh.i64('unlock_at'),
  borsh.u64('total_claimed'),
  borsh.stakingstatus('status'),
  borsh.option(borsh.i64)('unstake_requested_at'),
]);


export type StakingStatus =
  | { kind: 'Active' }
  | { kind: 'Locked' }
  | { kind: 'UnstakeRequested' }
  | { kind: 'Unstaked' }
;

export const StakingStatusSchema = borsh.rustEnum([
  borsh.unit('Active'),
  borsh.unit('Locked'),
  borsh.unit('UnstakeRequested'),
  borsh.unit('Unstaked'),
]);


export interface RewardConfig {
  pool: PublicKey;
  calculation_type: RewardCalculationType;
  base_apy: number;
  bonus_multiplier: number;
  max_apy: number;
  compound_frequency: number;
}

export const RewardConfigSchema = borsh.struct([
  borsh.publicKey('pool'),
  borsh.rewardcalculationtype('calculation_type'),
  borsh.u64('base_apy'),
  borsh.u64('bonus_multiplier'),
  borsh.u64('max_apy'),
  borsh.i64('compound_frequency'),
]);


export type RewardCalculationType =
  | { kind: 'FixedAPY' }
  | { kind: 'TieredAPY'; tier1_amount: number; tier1_apy: number; tier2_amount: number; tier2_apy: number; tier3_apy: number }
  | { kind: 'DynamicAPY'; min_apy: number; max_apy: number; utilization_threshold: number }
;

export const RewardCalculationTypeSchema = borsh.rustEnum([
  borsh.unit('FixedAPY'),
  borsh.struct([
    borsh.u64('tier1_amount'),
    borsh.u64('tier1_apy'),
    borsh.u64('tier2_amount'),
    borsh.u64('tier2_apy'),
    borsh.u64('tier3_apy'),
  ], 'TieredAPY'),
  borsh.struct([
    borsh.u64('min_apy'),
    borsh.u64('max_apy'),
    borsh.u64('utilization_threshold'),
  ], 'DynamicAPY'),
]);


export interface StakingEvent {
  event_type: EventType;
  user: PublicKey;
  pool: PublicKey;
  amount: number;
  timestamp: number;
  block_height: number;
}

export const StakingEventSchema = borsh.struct([
  borsh.eventtype('event_type'),
  borsh.publicKey('user'),
  borsh.publicKey('pool'),
  borsh.u64('amount'),
  borsh.i64('timestamp'),
  borsh.u64('block_height'),
]);


export type EventType =
  | { kind: 'Staked' }
  | { kind: 'Unstaked' }
  | { kind: 'RewardClaimed'; reward_amount: number }
  | { kind: 'UnstakeRequested' }
  | { kind: 'EmergencyWithdraw'; penalty: number }
  | { kind: 'LockExtended'; new_unlock_time: number }
;

export const EventTypeSchema = borsh.rustEnum([
  borsh.unit('Staked'),
  borsh.unit('Unstaked'),
  borsh.struct([
    borsh.u64('reward_amount'),
  ], 'RewardClaimed'),
  borsh.unit('UnstakeRequested'),
  borsh.struct([
    borsh.u64('penalty'),
  ], 'EmergencyWithdraw'),
  borsh.struct([
    borsh.i64('new_unlock_time'),
  ], 'LockExtended'),
]);


export interface UserStakingStats {
  owner: PublicKey;
  total_staked_lifetime: number;
  total_rewards_claimed: number;
  total_pools_participated: number;
  first_stake_at: number;
  last_activity_at: number;
}

export const UserStakingStatsSchema = borsh.struct([
  borsh.publicKey('owner'),
  borsh.u64('total_staked_lifetime'),
  borsh.u64('total_rewards_claimed'),
  borsh.u64('total_pools_participated'),
  borsh.i64('first_stake_at'),
  borsh.i64('last_activity_at'),
]);


export interface PoolStats {
  pool: PublicKey;
  total_rewards_distributed: number;
  average_stake_duration: number;
  highest_stake: number;
  current_apy: number;
  last_updated: number;
}

export const PoolStatsSchema = borsh.struct([
  borsh.publicKey('pool'),
  borsh.u64('total_rewards_distributed'),
  borsh.i64('average_stake_duration'),
  borsh.u64('highest_stake'),
  borsh.u64('current_apy'),
  borsh.i64('last_updated'),
]);
